<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <title>登录</title>
        <style>
            /* 通用科技感背景样式 */
            body {
                margin: 0;
                height: 100vh;
                display: flex;
                justify-content: center;
                align-items: center;
                background: linear-gradient(135deg, #0a0f1a 0%, #060912 50%, #04070f 100%);
                font-family: "Segoe UI", sans-serif;
                color: #fff;
                overflow: hidden;
                position: relative;
            }

            /* 深色背景上的微妙噪点纹理 */
            body::before {
                content: "";
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-image: radial-gradient(circle at 10% 20%, rgba(0, 120, 160, 0.03) 1px, transparent 1px),
                radial-gradient(circle at 90% 80%, rgba(0, 100, 140, 0.03) 1px, transparent 1px),
                radial-gradient(circle at 50% 50%, rgba(0, 80, 120, 0.02) 1px, transparent 1px);
                background-size: 100px 100px, 120px 120px, 80px 80px;
                z-index: -2;
            }

            /* 动态粒子背景 */
            .particles {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                z-index: -1;
            }

            .particle {
                position: absolute;
                width: 1.5px;
                height: 1.5px;
                background: rgba(0, 140, 180, 0.2);
                border-radius: 50%;
                animation: float 20s infinite linear;
            }

            @keyframes float {
                0% {
                    transform: translateY(0) translateX(0);
                    opacity: 0;
                }
                10% {
                    opacity: 0.4;
                }
                90% {
                    opacity: 0.2;
                }
                100% {
                    transform: translateY(-100vh) translateX(80px);
                    opacity: 0;
                }
            }

            /* 背景光晕效果 */
            .glow-circle {
                position: absolute;
                border-radius: 50%;
                filter: blur(40px);
                opacity: 0.15;
                z-index: -3;
            }

            /* 登录框样式 */
            .login-box {
                width: 340px;
                padding: 40px;
                background: rgba(15, 25, 40, 0.6);
                border: 1px solid rgba(100, 180, 220, 0.2);
                border-radius: 16px;
                backdrop-filter: blur(10px);
                text-align: center;
                transition: all 0.3s ease;
                position: relative;
                overflow: hidden;
                box-shadow: 0 8px 32px rgba(0, 10, 20, 0.3);
            }

            .login-box:hover {
                box-shadow: 0 0 25px rgba(0, 140, 180, 0.3);
                border-color: rgba(0, 140, 180, 0.3);
                transform: translateY(-2px);
            }

            /* 登录框内发光边框动画 */
            .login-box::after {
                content: '';
                position: absolute;
                top: -2px;
                left: -2px;
                right: -2px;
                bottom: -2px;
                background: linear-gradient(45deg, #008cff, #005ca0, #008cff);
                background-size: 400%;
                border-radius: 18px;
                z-index: -1;
                opacity: 0;
                transition: opacity 0.3s ease;
            }

            .login-box:hover::after {
                opacity: 0.4;
                animation: borderGlow 4s linear infinite;
            }

            @keyframes borderGlow {
                0% {
                    background-position: 0% 50%;
                }
                100% {
                    background-position: 400% 50%;
                }
            }

            .login-box h2 {
                margin-bottom: 30px;
                font-size: 22px;
                letter-spacing: 2px;
                font-weight: 300;
                background: linear-gradient(90deg, #00c8dc, #008cff);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                text-shadow: 0 0 10px rgba(0, 140, 180, 0.1);
            }

            .input {
                width: 100%;
                margin-bottom: 28px;
                position: relative;
                display: flex;
                justify-content: center;
            }

            .input input {
                width: 100%;
                padding: 12px 15px;
                border: none;
                border-radius: 8px;
                background: rgba(20, 35, 55, 0.7);
                color: #e0f0ff;
                font-size: 15px;
                outline: none;
                transition: 0.2s;
                border: 1px solid rgba(100, 180, 220, 0.1);
                box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
            }

            .input input::placeholder {
                color: rgba(180, 220, 255, 0.4);
            }

            .input input:focus {
                background: rgba(25, 45, 70, 0.8);
                border-color: rgba(0, 140, 180, 0.4);
                box-shadow: 0 0 10px rgba(0, 140, 180, 0.2);
                color: #ffffff;
            }

            button {
                width: 100%;
                margin-top: 25px;
                padding: 14px;
                background: linear-gradient(135deg, #008cff, #005ca0);
                border: none;
                border-radius: 8px;
                font-size: 16px;
                color: #ffffff;
                cursor: pointer;
                transition: 0.3s;
                font-weight: bold;
                position: relative;
                overflow: hidden;
                box-shadow: 0 4px 15px rgba(0, 92, 160, 0.3);
            }

            button::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
                transition: 0.5s;
            }

            button:hover {
                transform: scale(1.02) translateY(-1px);
                box-shadow: 0 6px 20px rgba(0, 140, 180, 0.4);
            }

            button:hover::before {
                left: 100%;
            }

            button:active {
                transform: scale(0.99) translateY(0);
            }

            /* 通用弹出层样式 */
            .popup {
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%) scale(0.8);
                opacity: 0;
                background: rgba(15, 25, 40, 0.9);
                padding: 20px 30px;
                border-radius: 12px;
                text-align: center;
                min-width: 220px;
                transition: 0.25s ease-out;
                box-shadow: 0 10px 30px rgba(0, 20, 40, 0.5);
                color: #fff;
                z-index: 200;
                border: 1px solid rgba(0, 140, 180, 0.2);
            }

            .popup.show {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }

            .popup .icon {
                font-size: 40px;
                margin-bottom: 10px;
                font-weight: bold;
            }

            .icon.success {
                color: #00cc6a;
                text-shadow: 0 0 10px rgba(0, 204, 106, 0.2);
            }

            .icon.error {
                color: #cc2e2e;
                text-shadow: 0 0 10px rgba(204, 46, 46, 0.2);
            }
        </style>
    </head>
    <body>
        <div class="particles" id="particles"></div>
        <div class="login-box">
            <h2>Chobits 管理工具</h2>
            <div class="input">
                <input id="account" type="text" placeholder="账号"/>
            </div>
            <div class="input">
                <input id="password" type="password" placeholder="密码"/>
            </div>
            <button onclick="login()">登录</button>
        </div>

        <!-- 弹出层 -->
        <div id="popup" class="popup">
            <div id="popupIcon" class="icon"></div>
            <div id="popupMsg"></div>
        </div>

        <script>
            // 显示弹出消息
            function showPopup(type, message, duration = 2000) {
                let popup = document.getElementById('popup');

                // 如果弹出层不存在，则创建它
                if (!popup) {
                    popup = document.createElement('div');
                    popup.id = 'popup';
                    popup.className = 'popup';

                    const popupIcon = document.createElement('div');
                    popupIcon.id = 'popupIcon';
                    popupIcon.className = 'icon';

                    const popupMsg = document.createElement('div');
                    popupMsg.id = 'popupMsg';

                    popup.appendChild(popupIcon);
                    popup.appendChild(popupMsg);
                    document.body.appendChild(popup);
                }

                const icon = document.getElementById('popupIcon');
                const msg = document.getElementById('popupMsg');

                icon.className = 'icon ' + type;
                icon.innerHTML = type === 'success' ? '✔' : '✘';
                msg.textContent = message;

                popup.classList.add('show');
                setTimeout(() => popup.classList.remove('show'), duration);
            }

            // 创建动态粒子背景
            function createParticles(containerId = 'particles', particleCount = 25) {
                const particlesContainer = document.getElementById(containerId);
                if (!particlesContainer) return;

                for (let i = 0; i < particleCount; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'particle';

                    const left = Math.random() * 100;
                    const delay = Math.random() * 20;
                    const duration = 15 + Math.random() * 25;

                    particle.style.left = `${left}%`;
                    particle.style.animationDelay = `-${delay}s`;
                    particle.style.animationDuration = `${duration}s`;

                    const size = 1 + Math.random() * 1;
                    particle.style.width = `${size}px`;
                    particle.style.height = `${size}px`;

                    const opacity = 0.15 + Math.random() * 0.25;
                    const blueTint = 140 + Math.floor(Math.random() * 40);
                    particle.style.background = `rgba(0, ${blueTint}, 180, ${opacity})`;

                    particlesContainer.appendChild(particle);
                }
            }

            // 创建动态背景光晕
            function createBackgroundGlows() {
                const body = document.body;
                const glowCount = 4;

                for (let i = 0; i < glowCount; i++) {
                    const glow = document.createElement('div');
                    glow.className = 'glow-circle';

                    // 随机位置
                    const positions = [
                        {top: '10%', left: '15%'},
                        {bottom: '15%', right: '20%'},
                        {top: '25%', right: '10%'},
                        {bottom: '20%', left: '25%'}
                    ];

                    const pos = positions[i];
                    if (pos.top) glow.style.top = pos.top;
                    if (pos.bottom) glow.style.bottom = pos.bottom;
                    if (pos.left) glow.style.left = pos.left;
                    if (pos.right) glow.style.right = pos.right;

                    // 随机大小
                    const sizes = [200, 250, 180, 220];
                    glow.style.width = `${sizes[i]}px`;
                    glow.style.height = `${sizes[i]}px`;

                    // 随机颜色（蓝青色系）
                    const colors = [
                        'radial-gradient(circle, #008cff, transparent)',
                        'radial-gradient(circle, #00c8dc, transparent)',
                        'radial-gradient(circle, #0070b0, transparent)',
                        'radial-gradient(circle, #00a0d0, transparent)'
                    ];
                    glow.style.background = colors[i];

                    // 随机动画延迟和持续时间
                    const delay = Math.random() * 5;
                    const duration = 8 + Math.random() * 12;

                    // 添加脉动动画
                    glow.style.animation = `glowPulse${i} ${duration}s ease-in-out ${delay}s infinite alternate`;

                    body.appendChild(glow);

                    // 为每个光晕创建独特的CSS动画
                    const style = document.createElement('style');
                    style.textContent = `
                    @keyframes glowPulse${i} {
                        0% {
                            opacity: 0.1;
                            transform: scale(0.95);
                        }
                        50% {
                            opacity: 0.18;
                            transform: scale(1.05);
                        }
                        100% {
                            opacity: 0.12;
                            transform: scale(1);
                        }
                    }
                `;
                    document.head.appendChild(style);
                }
            }

            // 初始化科技感背景
            function initTechBackground(particlesContainerId = 'particles', particleCount = 25) {
                // 确保粒子容器存在
                let particlesContainer = document.getElementById(particlesContainerId);
                if (!particlesContainer) {
                    particlesContainer = document.createElement('div');
                    particlesContainer.id = particlesContainerId;
                    particlesContainer.className = 'particles';
                    document.body.insertBefore(particlesContainer, document.body.firstChild);
                }

                createParticles(particlesContainerId, particleCount);
                createBackgroundGlows();
            }

            // 登录功能相关脚本
            async function login(loginUrl = '/login', redirectUrl = '/domain') {
                const account = document.getElementById('account');
                const password = document.getElementById('password');

                if (!account || !password) {
                    showPopup('error', '页面元素未找到');
                    return;
                }

                const accountValue = account.value;
                const passwordValue = password.value;

                // 简单验证输入
                if (!accountValue.trim()) {
                    showPopup('error', '请输入账号');
                    return;
                }
                if (!passwordValue.trim()) {
                    showPopup('error', '请输入密码');
                    return;
                }

                try {
                    const res = await fetch(loginUrl, {
                        method: 'POST',
                        headers: {'Content-Type': 'application/json'},
                        body: JSON.stringify({account: accountValue, password: passwordValue})
                    });

                    const data = await res.json();

                    if (data.status === 'success') {
                        showPopup('success', '登录成功');
                        setTimeout(() => {
                            window.location.href = redirectUrl;
                        }, 1200);
                    } else {
                        showPopup('error', data.message || '登录失败');
                    }
                } catch (err) {
                    console.error('登录请求错误:', err);
                    showPopup('error', '请求异常');
                }
            }

            // 页面加载完成后初始化
            document.addEventListener('DOMContentLoaded', () => {
                // 初始化背景效果
                initTechBackground();

                // 绑定回车键登录事件
                const passwordInput = document.getElementById('password');
                if (passwordInput) {
                    passwordInput.addEventListener('keypress', function (event) {
                        if (event.key === 'Enter') {
                            event.preventDefault();
                            login();
                        }
                    });
                }
            });
        </script>
    </body>
</html>

